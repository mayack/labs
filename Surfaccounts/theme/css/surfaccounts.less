/**
 * Agile CSS Framework
 * http://css.agiletoolkit.org/
 */

@import '../../agile-css/agiletoolkit.less';
@import 'fontello.css'; /* Icon library generated by www.fontello.com */
@import 'libs/select2.min.css';


// ==========================================================
// Typography
// ==========================================================

@bodyFamily:              "Proxima Nova", "Helvetica Neue", "Helvetica", @jui-ffDefault;
@bodyColor:               @swatchGray-15;
@bodySize:                0.875rem; // 14px
@bodyBaseline:            1.618; // Golden Section

@headingCase:             none; // Options: none, capitalize, uppercase, lowercase
@headingColor:            @swatchGray-15;
@headingFamily:           "Proxima Nova", "Helvetica Neue", "Helvetica", @jui-ffDefault;
@headingWeight:           400;
@headingBaseline:         1.2; // Minor Third

@fontScatter:             0.5; // Multiplier that affects difference between heading sizes
@baselineDestroyer:       1rem; // Value that globally affects margins and paddings in all elements. 1rem is default.


// ==========================================================
// Styles & Colors
// ==========================================================

@bodyBackground:          @atk-swatch-smoke;

@cornerRadius:            5px;

@textSelect:              @atk-swatch-midnight; // Text selection's color
@textDimmed:              lighten(@bodyColor, 40%);

@blur:                    5px; // .atk-blur effect

@borderDisabled:          lighten(@borderStatic, 10%);
@borderStatic:            #dadde0;
@borderClickable:         darken(@borderStatic, 10%);
@borderOverlay:           darken(@borderStatic, 25%);

@atk-swatch-white:        #ffffff;   .createSwatch(atk-swatch-white);
@atk-swatch-smoke:        #f3f4f5;   .createSwatch(atk-swatch-smoke);
@atk-swatch-asphalt:      #879699;   .createSwatch(atk-swatch-asphalt);
@atk-swatch-mint:         #46bc99;   .createSwatch(atk-swatch-mint);
@atk-swatch-aqua:         #3fc3df;   .createSwatch(atk-swatch-aqua);
@atk-swatch-ocean:        #0079a9;   .createSwatch(atk-swatch-ocean);
@atk-swatch-midnight:     #2f3f4d;   .createSwatch(atk-swatch-midnight);
@atk-swatch-night:        #24323e;   .createSwatch(atk-swatch-night, @borderColor: @atk-swatch-midnight);
@swatchText:              50%; // Text color sensitivity based on swatch

@effectSuccess:           #25c425;
@effectWarning:           #f7a600;
@effectDanger:            #ff2d1a;
@effectInfo:              #2bacd7;


// ==========================================================
// Components & Widgets
// ==========================================================

@linkColor:               darken(@atk-swatch-ocean,10%);
@linkColorHover:          darken(@linkColor,10%);

@dialogOverlay:           fade(#000, 25%); // Color of modal dialog's overlay

@tooltipColor:            fade(@atk-swatch-midnight, 90%);

@menuActive:              @atk-swatch-ocean;

@buttonDefault:           #fff;
@buttonHover:             #f5f5f5;
@buttonActive:            @borderClickable;

@boxColor:                #fff;

@formMandatory:           #ff0000;

@inputFocus:              @atk-swatch-aqua;
@inputFocusGlow:          0;

@popoverArrow:            12px;


// ==========================================================
// Custom
// ==========================================================


// Variables

@swatchGray-15: #1f2326; .textGray-15 { color: @swatchGray-15; }
@swatchGray-30: #39434d; .textGray-30 { color: @swatchGray-30; }
@swatchGray-40: #4d5a66; .textGray-40 { color: @swatchGray-40; }
@swatchGray-50: #667380; .textGray-50 { color: @swatchGray-50; }
@swatchGray-60: #8a9299; .textGray-60 { color: @swatchGray-60; }


// Layout

body, html {
  overflow-y: hidden;
}
.atk-layout {
  .content {
    height: 100%;
    overflow: auto;
  }
}
.sidebar {
  @navLinkColor: lighten(desaturate(@atk-swatch-midnight, 10%), 40%);
  @navLinkHoverColor: tint(@navLinkColor,50%);
  @navExpandedColor: lighten(@atk-swatch-midnight, 3%);
  @sidebarWidth: 12rem;
  .position(relative, @z:2);
  .transition(~"width .3s, min-width .3s");
  min-width: @sidebarWidth;
  overflow: hidden;
  width: @sidebarWidth;
  .sidebar-inner {
    .position(@t:0, @l:0);
    height: 100%;
    width: 100%;
    a, .company-switch-expanded, .company-switch-collapsed {
      color: @navLinkColor;
      &:hover {
        color: @navLinkHoverColor;
      }
    }
    .logo {
      position: relative;
      .logo-mask {
        .position(@t:0,@r:0);
        .transition(.3s);
        height: 100%;
        pointer-events: none;
        width: 70px;
      }
      a {
        .position(relative, @l:-7px);
        .transition(left .3s);
      }
    }
    .nav-sidebar {
      .transition(height .3s);
      >ul {
        li {
          .transition(background .7s);
          background: fade(@navExpandedColor,0%);
          &.active a, &.has-active:not(.expanded)>a {
            &, &:hover {
              box-shadow: 3px 0 0 0 @atk-swatch-aqua inset;
              color: #fff;
            } 
          }
          &.expanded {
            background: @navExpandedColor;
            .icon-angle-right:before {
              .rotate(90deg);
            }
          }
        }
        >li {
          a {
            .transition(~"box-shadow .5s, padding .3s, color .2s");
            box-shadow: 3px 0 0 0 fade(@atk-swatch-aqua,0%) inset;
            span {
              .transition(opacity .2s);
            }
            .icon-angle-right:before {
              .transition(.2s);
            }
          }
          >ul {
            display: none;
            padding-left: 0;
            padding-top: 0;
          }
        }
      }
    }
    .company-switch {
      .transition(.5s);
      background: transparent;
      cursor: pointer;
      width: 100%;
      .company-switch-expanded, .company-switch-collapsed {
        .position(@b:0,@l:0);
        .transition(opacity .5s);
        hr {
          .position(@t:-1px,@l:0);
          width: 100%;
        }
        &.atk-swatch-midnight:hover {
          background: @navExpandedColor;
        }
      }
      .company-switch-expanded {
        min-width: @sidebarWidth;
        z-index: 1;
      }
      .company-switch-collapsed {
        line-height: 1;
        padding-left: 0;
        padding-right: 0;
        text-align: center;
        width: 100%;
        z-index: 2;
      }
      >.atk-cells {
        position: relative;
      }
    }
  }
  &, .expanded {
    .sidebar-expanded;
  }
  &.collapsed {
    .sidebar-collapsed;
  }
}


// Objects

*[class*=atk-button]:not([class*='active']) {
  *[class*=icon] {
    color: @swatchGray-50;
  }
}
.atk-button-active {
  &, *[class*=icon] {
    color: #fff !important;
  }
}
.sidebar-trigger {
  position: relative;
  >* {
    .transition(opacity .3s);
  }
  .icon-menu {
    .position(@t:50%,@l:50%);
    line-height: 1;
    margin: -0.5em 0 0 -0.5em;
  }
  &, .expanded {
    .sidebar-trigger-expanded();
  }
  &.collapsed {
    .sidebar-trigger-collapsed();
  }
}


// Select2

.select2-container--default {
  .select2-results__option {
    padding: @inputPadding;
    padding-right: 2em;
    &:last-child {
      .atk-shape-rounded-bottom;
    }
  }
  .select2-results__option[aria-selected=true] {
    .icon-generator('\e81d');
    background: none;
    color: @atk-swatch-aqua !important;
    &:before {
      .atk-size-nano;
      left: auto;
      right: 0.6em;
    }
  }
  .select2-results__option--highlighted[aria-selected] {
    background-color: @atk-swatch-smoke;
    color: @bodyColor;
    position: relative;
  }
  .select2-selection--single {
    border-color: @borderClickable;
    border-radius: @cornerRadius;
    height: auto;
    .select2-selection__rendered {
      line-height: @bodyBaseline;
      padding: @inputPadding;
      padding-right: 2em;
      text-align: left;
    }
    .select2-selection__arrow {
      height: 100%;
      right: 0;
      top: 0;
      width: 1.8em;
      b {
        .position(@t:0, @l:0);
        .icon-generator('\e8b0');
        border: none;
        color: @swatchGray-50;
        height: 100%;
        margin: 0;
        position: absolute !important;
        width: 100%;
      }
    }
  }
  &.select2-container--open {
    .select2-selection--single {
      border-color: @inputFocus;
    }
  }
  .select2-dropdown {
    .box-shadow(0 5px 15px fade(@atk-swatch-night, 15%));
    border-color: @borderOverlay;
  }
}


// Mixins
.sidebar-expanded() {
  .sidebar-indicator {
    display: block;
  }
  @sidebarWidth: 12rem;
  min-width: @sidebarWidth;
  width: @sidebarWidth;
  .sidebar-inner {
    .logo {
      a {
        left: -7px;
      }
      .logo-mask {
        opacity: 0;
      }
    }
    .nav-sidebar {
      ul>li {
        >a {
          .atk-padding-left;
          >span {
            opacity: 1;
          }
        }
      }
    }
    .company-switch {
      .company-switch-expanded {
        pointer-events: auto;
        opacity: 1;
      }
      .company-switch-collapsed {
        pointer-events: none;
        opacity: 0;
      }
    }
  }
}
.sidebar-collapsed() {
  .sidebar-indicator {
    display: none;
  }
  @sidebarWidth: 3.35rem;
  min-width: @sidebarWidth;
  width: @sidebarWidth;
  .sidebar-inner {
    .logo {
      a {
        left: -10px;
      }
      .logo-mask {
        opacity: 1;
      }
    }
    .nav-sidebar {
      ul>li {
        >a {
          padding-left: @margin/1.5;
          >span {
            opacity: 0;
          }
        }
      }
    }
    .company-switch {
      .company-switch-expanded {
        pointer-events: none;
        opacity: 0;
      }
      .company-switch-collapsed {
        pointer-events: auto;
        opacity: 1;
      }
    }
  }
}
.sidebar-trigger-expanded() {
  .icon-collapse-left {
    opacity: 1;
  }
  .icon-menu {
    opacity: 0;
  }
}
.sidebar-trigger-collapsed() {
  .icon-collapse-left {
    opacity: 0;
  }
  .icon-menu {
    opacity: 1;
  }
}


// Misc

.scrollable {
  overflow: auto;
}



// ==========================================================
// Responsive
// ==========================================================

// Important: list .createViewport functions in the right order based on @min and @max values otherwise styles get overridden
.createViewport(
    @wrapperMargin:    3rem,
    @colsGutter:       2rem,
    @cols:             12,
    @viewportMinWidth: 1025px,
    @wrapperMinWidth:  54rem,
    @wrapperMaxWidth:  54rem,
    @customStyle: {
      .sidebar {
        .sidebar-expanded;
      }
      .sidebar-trigger {
        .sidebar-trigger-expanded;
      }
    }
);
.createViewport(
    @wrapperMargin:    3rem,
    @colsGutter:       2rem,
    @cols:             12,
    @viewportMinWidth: 0,
    @viewportMaxWidth: 1024px,
    @wrapperMinWidth:  54rem,
    @wrapperMaxWidth:  54rem,
    @customStyle: {
      .sidebar:not(.expanded) {
        .sidebar-collapsed;
      }
      .sidebar-trigger:not(.expanded) {
        .sidebar-trigger-collapsed;
      }
    }
);