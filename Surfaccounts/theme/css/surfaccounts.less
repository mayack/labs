/**
 * Agile CSS Framework
 * http://css.agiletoolkit.org/
 */

@import '../../agile-css/agiletoolkit.less';
@import url(https://fonts.googleapis.com/css?family=PT+Sans:400,700|Open+Sans:400,600,400italic,700,600italic,700italic);
@import (less) 'fontello.css'; /* Icon library generated by www.fontello.com */
@import 'libs/select2.min.css';


// ==========================================================
// Typography
// ==========================================================

@bodyFamily:           "Open Sans", "Helvetica Neue", "Helvetica", sans-serif;
@bodySize:             0.8125rem; // 12px
@bodyBaseline:         1.618;

@headingCase:          none; // Options: none, capitalize, uppercase, lowercase
@headingFamily:        "PT Sans", "Helvetica Neue", "Helvetica", sans-serif;
@headingWeight:        700;
@headingBaseline:      1.2; // Minor Third

@fontScatter:          0.5; // Multiplier that affects difference between heading sizes


// ==========================================================
// Swatches
// ==========================================================

.createSmartSwatch(
    @sName:            default,
    @sFill:            #fff,
    @sHeading:         @gray30,
    @sText:            @gray30,
    @sComment:         @gray60,
    @sLink:            @aqua,
    @sBorderIntensity: 5%,
    @sBorder:          #dadde0,
    @sCustomStyles:    {
      .border-black {
        border-color: @sText !important;
      }
      .select2-container--default {
        .select2-selection--single {
          border-color: @sBorderActive;
        }
        .select2-dropdown {
          border-color: @sBorderOverlay;
        }
      }
      .invoice-table table {
        tbody tr td, thead tr th {
          border-color: @sBorder !important;
        }
        tbody tr {
          &:not(:last-child) td {
            border-bottom-color: @sBorderDisabled !important;
            border-top-color: @sBorderDisabled !important;
          }
        }
      }
    }
);
.createSmartSwatch(
    @sName:            night,
    @sFill:            @night
);
.createSmartSwatch(
    @sName:            midnight,
    @sFill:            @midnight,
    @sText:            #fff,
    @sLink:            #fff,
    @sLinkHover:       #fff
);
.createSmartSwatch(
    @sName:            stone,
    @sFill:            @stone
);
.createSmartSwatch(
    @sName:            smoke,
    @sFill:            @smoke
);
.createSmartSwatch(
    @sName:            aqua,
    @sFill:            @aqua
);
.createSmartSwatch(
    @sName:            mint,
    @sFill:            @mint
);


// ==========================================================
// Styles & Colors
// ==========================================================

@bodyBackground:       @smoke;
@cornerRadius:         5px;
@textSelect:           @midnight;
@dialogOverlay:        fade(#000, 25%);
@tooltipColor:         fade(@midnight, 90%);
@popoverArrow:         12px;
@buttonPadding:        0.5em;
@buttonPaddingRatio:   1.5;

@effectSuccess:        @mint;
@effectWarning:        #f7a600;
@effectDanger:         #ff2d1a;
@effectInfo:           @aqua;

@inputColor:           #fff;
@inputText:            #000;
@inputFocus:           @aqua;
@inputFocusGlow:       0;
@inputPadding:         0.5em;
@inputPaddingRatio:    2.5;
@inputPlaceholder:     lighten(#000, 70%);
@inputInnerShadow:     0 3px 0 rgba(0, 0, 0, 0.03) inset;


// ==========================================================
// Custom
// ==========================================================

@smoke:       #f3f4f5;
@aqua:        #29bcdb;
@midnight:    #2f3f4d;
@mint:        #46bc99;
@night:       #24323e;

@gray10:      lighten(#000, 10%);
@gray20:      lighten(#000, 20%); .text-gray20 { &, & a { color: @gray20 !important; }}
@gray30:      lighten(#000, 30%); .text-gray30 { &, & a { color: @gray30 !important; }}
@gray40:      lighten(#000, 40%);
@gray50:      lighten(#000, 50%);
@gray60:      lighten(#000, 60%);
@gray70:      lighten(#000, 70%);
@gray80:      lighten(#000, 80%);
@gray90:      lighten(#000, 90%);
@gray97:      lighten(#000, 97%);

@green:       #009766;  .text-green   { &, & a { color: @green !important; }}
@blue:        #4281A4;  .text-blue    { &, & a { color: @blue !important; }}
@red:         #E56757;  .text-red     { &, & a { color: @red !important; }}
@yellow:      #DE9151;  .text-yellow  { &, & a { color: @yellow !important; }}
@violet:      #63628C;  .text-violet  { &, & a { color: @violet !important; }}
@stone:       #A9BCD0;

// Variables
@swatchGray-15: #1f2326;
@swatchGray-30: #39434d;
@swatchGray-40: #4d5a66;
@swatchGray-50: #667380;
@swatchGray-60: #8a9299;


// Layout
body, html {
  overflow-y: hidden;
}
.atk-layout {
  .content {
    height: 100%;
    overflow: auto;
  }
}
.sidebar {
  @navExpandedColor: shade(@aqua, 7%);
  @sidebarWidth: 12rem;
  .position(relative, @z:2);
  .transition(~"width .3s, min-width .3s");
  min-width: @sidebarWidth;
  overflow: hidden;
  width: @sidebarWidth;
  text-shadow: 0 2px 0 rgba(0,0,0,0.1);
  .sidebar-inner {
    .position(@t:0, @l:0);
    height: 100%;
    width: 100%;
    .logo {
      position: relative;
      .logo-mask {
        .position(@t:0,@r:0);
        .transition(.3s);
        height: 100%;
        pointer-events: none;
        width: 70px;
      }
      a {
        .position(relative, @l:-7px);
        .transition(left .3s);
      }
    }
    .nav-sidebar {
      .transition(height .3s);
      >ul {
        li {
          .transition(background .7s);
          background: fade(@navExpandedColor,0%);
          &.active a, &.has-active:not(.opened)>a {
            &, &:hover {
              box-shadow: 3px 0 0 0 #fff inset;
              color: #fff;
            } 
          }
          &.opened {
            background: @navExpandedColor;
            .icon-angle-right:before {
              .rotate(90deg);
            }
          }
        }
        >li {
          a {
            .transition(~"box-shadow .5s, padding .3s, color .2s");
            box-shadow: 3px 0 0 0 fade(#fff,0%) inset;
            span {
              .transition(opacity .2s);
            }
            .icon-angle-right:before {
              .transition(.2s);
            }
          }
          >ul {
            display: none;
            overflow: hidden;
            padding-left: 0;
            padding-top: 0;
            li:last-child {
              margin-bottom: @space-s;
            }
          }
        }
      }
    }
    footer {
      .transition(.5s);
      background: transparent;
      cursor: pointer;
      width: 100%;
      .footer-expanded, .footer-collapsed {
        .position(@b:0,@l:0);
        .transition(opacity .5s);
        hr {
          .position(@t:-1px,@l:0);
          width: 100%;
        }
        &.swatch-midnight:hover {
          background: @navExpandedColor;
        }
      }
      .footer-expanded {
        min-width: @sidebarWidth;
        z-index: 1;
      }
      .footer-collapsed {
        line-height: 1;
        padding-left: 0 !important;
        padding-right: 0 !important;
        text-align: center;
        width: 100%;
        z-index: 2;
      }
      >.atk-cells {
        position: relative;
      }
    }
  }
  &, .expanded {
    .sidebar-expanded;
  }
  &.collapsed {
    .sidebar-collapsed;
  }
}
.sidebar-trigger {
  position: relative;
  >* {
    .transition(opacity .3s);
  }
  .icon-menu {
    .position(@t:50%,@l:50%);
    line-height: 1;
    margin: -0.5em 0 0 -0.5em;
  }
  &, .expanded {
    .sidebar-trigger-expanded();
  }
  &.collapsed {
    .sidebar-trigger-collapsed();
  }
}

// Styling
.textGray-15 {
  &, & a {
    color: @swatchGray-15 !important;
  }
}
.textGray-30 {
  &, & a {
    color: @swatchGray-30 !important;
  }
}
.textGray-40 {
  &, & a {
    color: @swatchGray-40 !important;
  }
}
.textGray-50 {
  &, & a {
    color: @swatchGray-50 !important;
  }
}
.textGray-60 {
  &, & a {
    color: @swatchGray-60 !important;
  }
  & a:hover, a&:hover {
    color: darken(@swatchGray-60, 10%) !important;
  }
}

// Objects
.select2-dropdown, .ui-datepicker, [class*="atk-popover-"], .ui-dialog {
  .elementShadow;
}
[class*="atk-table"] {
  table {
    // thead, tbody {
    //   tr:first-child {
    //     th, td {
    //       &:first-child {
    //         &:extend(.atk-shape-rounded--top--left);
    //       }
    //       &:last-child {
    //         &:extend(.atk-shape-rounded--top--right);
    //       }
    //     }
    //   }
    // }
    thead + tbody tr:first-child {
      td:first-child, td:last-child {
        &:extend(.atk-shape-rectangle);
      }
    }
    tbody tr {
      .atk-tableAction.visible {
        opacity: 1 !important;
      }
      // &:last-child td {
      //   &:first-child {
      //     &:extend(.atk-shape-rounded--bottom--left);
      //   }
      //   &:last-child {
      //     &:extend(.atk-shape-rounded--bottom--right);
      //   }
      // }
    }
  }
}
.invoice-table {
  thead tr th {
    padding: @space-xs !important;
  }
  tbody tr td {
    input {
      .border-radius(0~'!important');
      .box-shadow(none~'!important');
      background: none !important;
      border: none !important;
      display: inline-block;
      width: 100%;
      &:focus {
        background: #fff !important;
        box-shadow: 0 0 0 2px @inputFocus !important;
        position: relative;
        z-index: 2;
      }
    }
  }
}

// jQueryUI
.ui-dialog {
  border: none;
  .ui-widget-header.ui-dialog-titlebar {
    background: @smoke;
    text-align: center;
  }
  .dialog-scrollable {
    max-height: 280px !important;
    overflow: auto;
  }
}
.ui-tabs.tabs-minimal {
  ul.ui-tabs-nav {
    border: none;
    margin-bottom: @space-s !important;
    li.ui-state-default {
      border: none;
      border-radius: 0;
      margin: 0;
      a:not([class*="atk-inputLabel"]) {
        padding: @space-xs 0;
      }
      + li {
        margin-left: @space;
      }
      &.ui-state-active {
        box-shadow: 0 -2px 0 @inputFocus inset;
        padding-bottom: 0;
      }
    }
  }
  .ui-tabs-panel.ui-widget-content {
    border: none;
    padding: 0;
  }
}
.ui-datepicker {
  margin: 4px 0;
}

// Misc
.scrollable {
  overflow-y: auto;
}
.disable {
  pointer-events: none;
}
#actions-dropdown {
  .position(@z:10);
}
textarea {
  resize: none;
}

// Select2
.select2-container--default {
  .select2-results__option {
    padding: @inputPadding;
    padding-right: 2em;
    &:last-child {
      .atk-shape-rounded--bottom;
    }
  }
  .select2-results__option[aria-selected=true] {
    .icon-generator('\e81d');
    background: none;
    color: @aqua !important;
    &:before {
      &:extend([class*="atk-text"][class*="-size--xs"]);
      left: auto;
      right: 0.6em;
    }
  }
  .select2-results__option--highlighted[aria-selected] {
    background-color: @smoke;
    color: inherit;
    position: relative;
  }
  .select2-selection--single {
    border-radius: @cornerRadius;
    height: auto;
    .select2-selection__rendered {
      line-height: @bodyBaseline;
      padding: @inputPadding;
      padding-right: 2em;
      text-align: left;
    }
    .select2-selection__arrow {
      height: 100%;
      right: 0;
      top: 0;
      width: 1.8em;
      b {
        .position(@t:0, @l:0);
        .icon-generator('\e8b0');
        border: none;
        color: @swatchGray-50;
        height: 100%;
        margin: 0;
        position: absolute !important;
        width: 100%;
      }
    }
  }
  &.select2-container--open {
    .select2-selection--single {
      border-color: @inputFocus;
    }
  }
}

// Mixins
.elementShadow() {
  .box-shadow(0 5px 15px fade(@midnight, 15%));
}
.sidebar-expanded() {
  .sidebar-indicator {
    display: block;
  }
  @sidebarWidth: 12rem;
  min-width: @sidebarWidth;
  width: @sidebarWidth;
  .sidebar-inner {
    .logo {
      a {
        left: -7px;
      }
      .logo-mask {
        opacity: 0;
      }
    }
    .nav-sidebar {
      ul>li {
        >a {
          padding-left: @space;
          >span {
            opacity: 1;
          }
        }
      }
    }
    footer {
      .footer-expanded {
        pointer-events: auto;
        opacity: 1;
      }
      .footer-collapsed {
        pointer-events: none;
        opacity: 0;
      }
    }
  }
}
.sidebar-collapsed() {
  .sidebar-indicator {
    display: none;
  }
  @sidebarWidth: 3.35rem;
  min-width: @sidebarWidth;
  width: @sidebarWidth;
  .sidebar-inner {
    .logo {
      a {
        left: -10px;
      }
      .logo-mask {
        opacity: 1;
      }
    }
    .nav-sidebar {
      ul>li {
        >a {
          padding-left: @margin/1.5 !important;
          >span {
            opacity: 0;
          }
        }
      }
    }
    footer {
      .footer-expanded {
        pointer-events: none;
        opacity: 0;
      }
      .footer-collapsed {
        pointer-events: auto;
        opacity: 1;
      }
    }
  }
}
.sidebar-trigger-expanded() {
  .icon-collapse-left {
    opacity: 1;
  }
  .icon-menu {
    opacity: 0;
  }
}
.sidebar-trigger-collapsed() {
  .icon-collapse-left {
    opacity: 0;
  }
  .icon-menu {
    opacity: 1;
  }
}


// ==========================================================
// Responsive
// ==========================================================

// Important: list .createViewport functions in the right order based on @min and @max values otherwise styles get overridden
.createViewport(
    @wrapperMargin:    3rem,
    @colsGutter:       2rem,
    @cols:             12,
    @viewportMinWidth: 1025px,
    @wrapperMinWidth:  54rem,
    @wrapperMaxWidth:  54rem,
    @customStyle: {
      .sidebar {
        .sidebar-expanded;
      }
      .sidebar-trigger {
        .sidebar-trigger-expanded;
      }
    }
);
.createViewport(
    @wrapperMargin:    3rem,
    @colsGutter:       2rem,
    @cols:             12,
    @viewportMinWidth: 0,
    @viewportMaxWidth: 1024px,
    @wrapperMinWidth:  54rem,
    @wrapperMaxWidth:  54rem,
    @customStyle: {
      .sidebar:not(.expanded) {
        .sidebar-collapsed;
      }
      .sidebar-trigger:not(.expanded) {
        .sidebar-trigger-collapsed;
      }
    }
);